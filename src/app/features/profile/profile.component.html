<main class="main bg-dark">
    @defer (when isDataLoaded) {
        <div class=header>
            <h1>Welcome back<br />{{ userService.firstName }} {{ userService.lastName }}!</h1>
            @if (isFormOpen) {
                <ab-editProfileForm (isProfileUpdatedEvent)="handleForm($event)" />
            } @else {
                <button class="button header__edit-button" (click)="openForm()">Edit Name</button>
            }
            @if (isProfileUpdated) {
                <span>User profile updated</span>
            }
        </div>
        <h2 class="sr-only">Accounts</h2>   
        @for (data of bankAccountDataMock; track $index) {
            <ab-bank-account-preview [title]="data.title" [amount]="data.amount" [description]="data.description" />
        }
    } @placeholder {
        <div class="placeholder-container">
            @if (error) {
                <span class="error-msg">{{ error }}</span>
            } @else {
                <!-- implement a better loader -->
                <ab-loader />
            }
        </div>
    }
</main>